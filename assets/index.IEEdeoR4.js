import{c as a,d as e,M as n,N as s,z as t,a as c,b as o,e as l,h as r,k as i,f as u,n as d,g as f,C as p,u as h,m as b,O as _,P as v}from"./index-ChF6M-dg.js";import{d as m,e as g,B as y,F as k,f as j,S as I,N as S}from"./icon.DrYkBsdw.js";import{u as x}from"./useInject.MY1LptLK.js";import{c as B,a as O,m as C,n as T,t as $,d as A,e as L,f as F,h as N,g as V,b as P,P as R,_ as z}from"./plugin-vueexport-helper.DAvfYnQo.js";import{u as G}from"./useTranslate.B4cyTHUf.js";const H=Symbol("Form");const M={...B,modelValue:O(""),inputType:C("text"),shape:C("round"),maxLength:T,placeholder:String,clearable:$,clearIcon:C("circle-close"),background:String,inputBackground:String,focusStyle:A({}),autofocus:Boolean,disabled:L,readonly:Boolean,inputAlign:C("left"),confirmType:C("done"),safeAreaInsetBottom:Boolean,cursorSpacing:F(0)},q={[m]:(a,e)=>(N(a)||void 0===a)&&e instanceof Object,[g]:(a,e)=>(N(a)||void 0===a)&&e instanceof Object,[y]:(a,e)=>(N(a)||void 0===a)&&e instanceof Object,[k]:(a,e)=>(N(a)||void 0===a)&&e instanceof Object,[j]:a=>N(a)||void 0===a,[I]:a=>N(a)||void 0===a,clickInput:(a,e)=>(N(a)||void 0===a)&&e instanceof Object,clickLeftIcon:(a,e)=>(N(a)||void 0===a)&&e instanceof Object,clickRightIcon:(a,e)=>(N(a)||void 0===a)&&e instanceof Object},w=`${R}-searchbar`,{translate:D}=G(w),E=e({name:w,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),J=z(e({...E,props:M,emits:q,setup(e,{emit:B}){const O=e,C=B,T=n();function $(a){return Boolean(T[a])}const A=function(e){const{parent:n}=x(H);return a((()=>null!=e.value?e.value:null!=(null==n?void 0:n.props.disabled)&&n.props.disabled))}(s(O,"disabled")),L=t({active:!1});const F=a((()=>null==O.modelValue?"":String(O.modelValue))),N=a((()=>null==O.maxLength?-1:Number(O.maxLength))),R=a((()=>V(O,w,{"safe-area-inset-bottom":O.safeAreaInsetBottom}))),z=a((()=>P(O,{background:O.background}))),G=a((()=>{const a={background:O.inputBackground};return L.active&&Object.assign(a,O.focusStyle),a})),M=a((()=>({textAlign:O.inputAlign})));function q(a){return N.value>0&&a.length>N.value&&(a=a.slice(0,N.value)),a}function E(a){const e=q(a.detail.value);C(m,e,a),C(g,e,a)}function J(a){const e=q(a.detail.value);L.active=!0,C(k,e,a)}function K(a){const e=q(a.detail.value);setTimeout((()=>{L.active=!1}),200),C(y,e,a)}function Q(a){C(m,"",a),C(g,"",a),C(j,"")}function U(){C(I,F.value)}function W(a){C("clickInput",F.value,a)}function X(a){C("clickLeftIcon",F.value,a)}function Y(a){C("clickRightIcon",F.value,a)}return(a,e)=>{const n=b,s=_,t=v;return c(),o(n,{class:d(R.value),style:f(z.value)},{default:l((()=>[$("leftout")?(c(),o(n,{key:0,class:"nut-searchbar__search-icon nut-searchbar__left-search-icon",onClick:X},{default:l((()=>[r(a.$slots,"leftout",{},void 0,!0)])),_:3})):i("",!0),u(n,{class:d(["nut-searchbar__search-input",[O.shape]]),style:f(G.value)},{default:l((()=>[$("leftin")?(c(),o(n,{key:0,class:"nut-searchbar__search-icon nut-searchbar__iptleft-search-icon"},{default:l((()=>[r(a.$slots,"leftin",{},void 0,!0)])),_:3})):i("",!0),u(n,{class:d(["nut-searchbar__input-inner",{"nut-searchbar__input-inner-absolute":$("rightin")}])},{default:l((()=>[u(t,{class:"nut-searchbar__input-form",action:"#",onsubmit:"return false",onSubmit:p(U,["prevent"])},{default:l((()=>[u(s,{class:d(["nut-searchbar__input-bar",{"nut-searchbar__input-bar_clear":O.clearable}]),style:f(M.value),type:O.inputType,maxlength:N.value,placeholder:O.placeholder||h(D)("placeholder"),value:F.value,focus:O.autofocus,"confirm-type":O.confirmType,disabled:h(A),readonly:O.readonly,"cursor-spacing":O.cursorSpacing,onClick:W,onInput:E,onFocus:J,onBlur:K,onConfirm:U},null,8,["class","style","type","maxlength","placeholder","value","focus","confirm-type","disabled","readonly","cursor-spacing"])])),_:1})])),_:1},8,["class"]),u(n,{class:d(["nut-searchbar__input-inner-icon",{"nut-searchbar__input-inner-icon-absolute":$("rightin")}])},{default:l((()=>[O.clearable?(c(),o(n,{key:0,class:d(["nut-searchbar__search-icon nut-searchbar__input-clear",{"nut-hidden":F.value.length<=0}]),onClick:Q},{default:l((()=>[$("clear-icon")?r(a.$slots,"clear-icon",{key:0},void 0,!0):(c(),o(S,{key:1,name:O.clearIcon},null,8,["name"]))])),_:3},8,["class"])):i("",!0),$("rightin")?(c(),o(n,{key:1,class:"nut-searchbar__search-icon nut-searchbar__iptright-search-icon",onClick:Y},{default:l((()=>[r(a.$slots,"rightin",{},void 0,!0)])),_:3})):i("",!0)])),_:3},8,["class"])])),_:3},8,["class","style"]),$("rightout")?(c(),o(n,{key:1,class:"nut-searchbar__search-icon nut-searchbar__right-search-icon"},{default:l((()=>[r(a.$slots,"rightout",{},void 0,!0)])),_:3})):i("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-3df1b98e"]]);export{J as _};
