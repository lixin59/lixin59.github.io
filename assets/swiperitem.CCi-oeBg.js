import{l as e,c as o,m as t,t as a,i as n,g as l,b as s,P as i,_ as r,a as c,k as u,o as v,q as p}from"./plugin-vueexport-helper.DAvfYnQo.js";import{W as d,E as f,r as h,X as m,Q as y,Y as g,z as b,c as C,w,Z as x,d as k,a as $,i as I,b as T,_ as O,u as _,k as S,f as P,e as z,h as A,n as V,F as E,m as N,$ as X,a0 as Y,g as j,A as M,K as B}from"./index-ChF6M-dg.js";import{o as D,a as Q,N as q}from"./button.BiE77yHJ.js";import{U as F,g as H,c as G,O as R,a as U,N as L,e as K}from"./icon.DrYkBsdw.js";import{u as W}from"./useInject.MY1LptLK.js";const Z={center:"fade",top:"slide-down",bottom:"slide-up",left:"slide-left",right:"slide-right"};function J(o,{args:t=[],done:a,canceled:n}){if(o){const l=o(null,...t);e(l)?l.then((e=>{e?a(e):n&&n()})).catch((()=>{})):l?a():n&&n()}else a()}const ee=window;const oe=void 0!==ee?ee.requestAnimationFrame||ee.webkitRequestAnimationFrame||function(e){ee.setTimeout(e,1e3/60)}:function(e){setTimeout(e,1e3/60)};function te(e,o){const{getSelectorNodeInfo:t}=function(e){let o=null;return e||(e=f()),e||console.warn("useSelectorQuery","useSelectorQuery必须在setup函数中使用"),o=d().in(e),{query:o,getSelectorNodeInfo:e=>new Promise(((t,a)=>{o?o.select(e).boundingClientRect((o=>{o?t(o):a(new Error(`未找到对应节点: ${e}`))})).exec():a(new Error("未找到对应的SelectorQuery实例"))})),getSelectorNodeInfos:e=>new Promise(((t,a)=>{o?o.selectAll(e).boundingClientRect((o=>{const n=o;n&&n.length>0?t(n):a(new Error(`未找到对应节点: ${e}`))})).exec():a(new Error("未找到对应的SelectorQuery实例"))}))}}(o);return t(`#${e}`)}const ae=10;function ne(){const e=h(0),o=h(0),t=h(0),a=h(0),n=h(0),l=h(0),s=h(0),i=h(0),r=h(""),c=()=>{n.value=0,l.value=0,s.value=0,i.value=0,r.value=""};return{move:c=>{const u=c.touches[0];var v,p;n.value=u.clientX-e.value,l.value=u.clientY-o.value,t.value=u.clientX,a.value=u.clientY,s.value=Math.abs(n.value),i.value=Math.abs(l.value),r.value||(r.value=(v=s.value,p=i.value,v>p&&v>ae?"horizontal":p>v&&p>ae?"vertical":""))},start:t=>{c(),e.value=t.touches[0].clientX,o.value=t.touches[0].clientY},reset:c,startX:e,startY:o,moveX:t,moveY:a,deltaX:n,deltaY:l,offsetX:s,offsetY:i,direction:r,isVertical:()=>"vertical"===r.value,isHorizontal:()=>"horizontal"===r.value}}function le(e,o,t){const a=function(e,o){const t=[],a=e=>{Array.isArray(e)&&e.forEach((e=>{var n,l;(l=e)&&!0===l.__v_isVNode&&(e.type&&e.type.name===o?t.push(e):((null==(n=e.component)?void 0:n.subTree)&&a(e.component.subTree.children),e.children&&a(e.children)))}))};return a(e),t}(e&&e.subTree&&e.subTree.children,t);o.sort(((e,o)=>a.indexOf(e.vnode)-a.indexOf(o.vnode)))}let se=2e3;const ie={...D,...o,position:t("center"),transition:{type:String,default:""},popClass:t(""),closeable:Boolean,closeIconPosition:t("top-right"),closeIcon:t("close"),destroyOnClose:a,overlay:a,round:Boolean,safeAreaInsetBottom:Boolean,safeAreaInsetTop:a},re={[F]:e=>n(e),"click-pop":e=>e instanceof Object,"click-close-icon":()=>!0,[H]:()=>!0,[G]:()=>!0,[R]:()=>!0,opend:()=>!0,[U]:()=>!0,"click-overlay":()=>!0},ce=`${i}-popup`;function ue(e,o){const t=b({innerVisible:!1,innerIndex:e.zIndex,showSlot:!0}),a=C((()=>l(e,ce,{round:e.round,[`nut-popup--${e.position}`]:!0,[`nut-popup--${e.position}--safebottom`]:"bottom"===e.position&&e.safeAreaInsetBottom,[`nut-popup--${e.position}--safetop`]:"top"===e.position&&e.safeAreaInsetTop,[e.popClass]:!0}))),n=C((()=>s(e,{zIndex:t.innerIndex,transitionDuration:`${e.duration}ms`}))),i=C((()=>e.transition?e.transition:`${Z[e.position]}`)),r=()=>{t.innerVisible||(t.innerIndex=void 0!==e.zIndex?e.zIndex:++se,t.innerVisible=!0,o(F,!0),t.showSlot=!0,o(H))},c=()=>{t.innerVisible&&(t.innerVisible=!1,o(F,!1),o(G))};return w((()=>e.visible),(e=>{e&&!t.innerVisible&&r(),!e&&t.innerVisible&&(t.innerVisible=!1,o(G))})),{...x(t),popStyle:n,transitionName:i,classes:a,onClick:e=>{o("click-pop",e)},onClickCloseIcon:e=>{e.stopPropagation(),o("click-close-icon"),c()},onClickOverlay:()=>{o("click-overlay"),e.closeOnClickOverlay&&c()},onOpened:()=>{o(R),o("opend")},onClosed:()=>{o(U),t.showSlot=!e.destroyOnClose}}}const ve=k({name:`${i}-popup`,options:{virtualHost:!0,addGlobalClass:!0}}),pe=r(k({...ve,props:ie,emits:re,setup(e,{emit:o}){const t=e,a=o,{classes:n,popStyle:l,innerIndex:s,showSlot:i,transitionName:r,onClick:c,onClickCloseIcon:u,onClickOverlay:v,onOpened:p,onClosed:d}=ue(t,a);return(e,o)=>{const a=N;return $(),I(E,null,[t.overlay?($(),T(Q,O({key:0},e.$attrs,{visible:t.visible,"close-on-click-overlay":t.closeOnClickOverlay,"z-index":_(s),"lock-scroll":t.lockScroll,duration:t.duration,"overlay-class":t.overlayClass,"overlay-style":t.overlayStyle,"destroy-on-close":t.destroyOnClose,onClick:_(v)}),null,16,["visible","close-on-click-overlay","z-index","lock-scroll","duration","overlay-class","overlay-style","destroy-on-close","onClick"])):S("",!0),P(q,{name:_(r),"custom-class":_(n),show:t.visible,"destroy-on-close":t.destroyOnClose,"custom-style":_(l),duration:Number(t.duration),onAfterEnter:_(p),onAfterLeave:_(d),onClick:_(c)},{default:z((()=>[_(i)?A(e.$slots,"default",{key:0},void 0,!0):S("",!0),t.closeable?($(),T(a,{key:1,class:V(["nut-popup__close-icon",`nut-popup__close-icon--${t.closeIconPosition}`]),onClick:_(u)},{default:z((()=>[A(e.$slots,"closeIcon",{},(()=>[P(L,{name:"close",height:"12px"})]),!0)])),_:3},8,["class","onClick"])):S("",!0)])),_:3},8,["name","custom-class","show","destroy-on-close","custom-style","duration","onAfterEnter","onAfterLeave","onClick"])],64)}}}),[["__scopeId","data-v-6be07a7d"]]),de={...o,width:c(""),height:c(""),direction:t("horizontal"),paginationVisible:Boolean,paginationColor:t("#fff"),loop:a,duration:c(500),autoPlay:c(0),isAutoPlay:a,initPage:c(0),touchable:a,isPreventDefault:a,isStopPropagation:a,list:{type:Array,default:()=>[]},paginationUnselectedColor:t("#ddd")},fe={[K]:e=>u(e)},he=Symbol("swiper"),me=`${i}-swiper`,ye=k({name:me,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),ge=r(k({...ye,props:de,emits:fe,setup(e,{expose:o,emit:t}){const a=e,n=t,l=f(),s=`container-${v()}`,i=b({active:0,num:0,rect:null,width:0,height:0,moving:!1,offset:0,touchTime:0,autoplayTimer:null,childrenVNode:[],style:{}}),r=ne(),c=C((()=>({[me]:!0}))),u=C((()=>"vertical"===a.direction)),d=C((()=>({[`${me}-inner`]:!0,[`${me}-vertical`]:u.value}))),h=C((()=>({[`${me}-pagination`]:!0,[`${me}-pagination-vertical`]:u.value}))),x=C((()=>u.value?r.deltaY.value:r.deltaX.value)),k=C((()=>r.direction.value===a.direction)),O=C((()=>G.length)),D=C((()=>i[u.value?"height":"width"])),Q=C((()=>O.value*D.value)),q=C((()=>{if(i.rect){return(u.value?i.rect.height:i.rect.width)-D.value*O.value}return 0})),F=C((()=>(i.active+O.value)%O.value));function H(){let e=0;e=i.offset,i.style={transitionDuration:`${i.moving?0:a.duration}ms`,transform:`translate${u.value?"Y":"X"}(${e}px)`,[u.value?"height":"width"]:D.value*O.value+"px",[u.value?"width":"height"]:`${u.value?i.width:i.height}px`}}const{internalChildren:G}=function(e,o){const t=m([]),a=m([]),n=f(),l=e=>{e.proxy&&(t.push(g(e)),a.push(g(e.proxy)),le(n,t,o))},s=e=>{e.proxy&&(t.splice(t.indexOf(g(e)),1),a.splice(a.indexOf(g(e.proxy)),1))};return o=>(y(e,{add:l,remove:s,internalChildren:t,...o}),{internalChildren:t,children:a})}(he,"nut-form-swiper")({props:a,size:D});function R(e,o=0){let t=e*D.value;a.loop||(t=Math.min(t,-q.value));let n=o-t;return a.loop||(n=p(n,q.value,0)),n}function U({pace:e=0,offset:o=0,isEmit:t=!1}){if(O.value<=1)return;const{active:l}=i,s=function(e){const{active:o}=i;return e?a.loop?p(o+e,-1,O.value):p(o+e,0,O.value-1):o}(e),r=R(s,o);if(a.loop){if(G[0]&&r!==q.value){const e=r<q.value;G[0].exposed.setOffset(e?Q.value:0)}if(G[O.value-1]&&0!==r){const e=r>0;G[O.value-1].exposed.setOffset(e?-Q.value:0)}}i.active=s,i.offset=r,t&&l!==i.active&&n("change",F.value),H()}function L(){i.moving=!0,i.active<=-1&&U({pace:O.value}),i.active>=O.value&&U({pace:-O.value})}function K(){i.autoplayTimer&&clearTimeout(i.autoplayTimer)}function W(e){L(),r.reset(),oe((()=>{oe((()=>{i.moving=!1,U({pace:e,isEmit:!0})}))}))}function Z(){W(1)}function J(){+a.autoPlay<=0||O.value<=1||(K(),i.autoplayTimer=setTimeout((()=>{Z(),J()}),Number(a.autoPlay)))}async function ee(e=+a.initPage){K(),i.rect=await te(s,l),i.rect&&(e=Math.min(O.value-1,e),i.width=a.width?+a.width:i.rect.width,i.height=a.height?+a.height:i.rect.height,i.active=e,i.offset=R(i.active),i.moving=!0,H(),J())}function ae(e){a.isStopPropagation&&e.stopPropagation(),a.touchable&&(r.start(e),i.touchTime=Date.now(),K(),L())}function se(e){a.touchable&&i.moving&&(r.move(e),k.value&&U({offset:x.value}))}function ie(e){if(!a.touchable||!i.moving)return;const o=x.value/(Date.now()-i.touchTime);if((Math.abs(o)>.3||Math.abs(x.value)>+(D.value/2).toFixed(2))&&k.value){let e=0;const o=u.value?r.offsetY.value:r.offsetX.value;e=a.loop?o>0?x.value>0?-1:1:0:-Math[x.value>0?"ceil":"floor"](x.value/D.value),U({pace:e,isEmit:!0})}else x.value&&U({pace:0});i.moving=!1,H(),J()}return o({prev:function(){W(-1)},next:Z,to:function(e){L(),r.reset(),oe((()=>{let o;i.moving=!1,o=a.loop&&O.value===e?0===i.active?0:e:e%O.value,U({pace:o-i.active,isEmit:!0})}))}}),X((()=>{K()})),Y((()=>{K()})),w((()=>a.initPage),(e=>{B((()=>{ee(+e)}))})),w((()=>a.height),(e=>{B((()=>{ee(+e)}))})),w((()=>G.length),(()=>{B((()=>{ee()}))})),w((()=>a.autoPlay),(e=>{+e>0?J():K()})),(e,o)=>{const t=N;return $(),T(t,{id:s,class:V([c.value,e.customClass]),"catch-move":e.isPreventDefault,style:j([e.customStyle]),onTouchstart:ae,onTouchmove:se,onTouchend:ie,onTouchcancel:ie},{default:z((()=>[P(t,{class:V(d.value),style:j(i.style)},{default:z((()=>[A(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),A(e.$slots,"page",{},void 0,!0),e.paginationVisible&&!e.$slots.page?($(),T(t,{key:0,class:V(h.value)},{default:z((()=>[($(!0),I(E,null,M(_(G).length,((o,t)=>($(),I("i",{key:t,class:V(["pagination",{active:F.value===t}]),style:j({backgroundColor:F.value===t?e.paginationColor:e.paginationUnselectedColor})},null,6)))),128))])),_:1},8,["class"])):S("",!0)])),_:3},8,["class","catch-move","style","onTouchstart","onTouchmove","onTouchend","onTouchcancel"])}}}),[["__scopeId","data-v-5ba0741f"]]),be={...o},Ce=`${i}-swiper-item`,we=k({name:Ce,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),xe=r(k({...we,props:be,setup(e,{expose:o}){const t=e,{parent:a}=W(he),n=b({offset:0}),i=C((()=>l(t,Ce))),r=C((()=>{const e={},o=null==a?void 0:a.props.direction;return(null==a?void 0:a.size.value)&&(e["horizontal"===o?"width":"height"]=`${null==a?void 0:a.size.value}px`),n.offset&&(e.transform=`translate${"horizontal"===o?"X":"Y"}(${n.offset}px)`),s(t,e)}));return o({setOffset:function(e){n.offset=e}}),(e,o)=>{const t=N;return $(),T(t,{class:V(i.value),style:j(r.value)},{default:z((()=>[A(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-6f067c59"]]);export{pe as N,ge as a,xe as b,J as f,ie as p};
