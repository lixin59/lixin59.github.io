import{r as e,c as o,a as t,m as a,t as n,i as l,g as s,b as i,P as r,_ as c,q as u,s as v,u as d}from"./_plugin-vue_export-helper.DZhKmUop.js";import{W as p,E as f,r as h,X as m,Q as y,Y as b,d as g,c as C,Z as w,a as k,b as x,e as $,h as I,z as O,w as _,_ as T,i as S,$ as z,u as P,k as A,f as N,n as V,F as E,m as X,a0 as Y,a1 as j,g as B,A as D,K as M}from"./index-D_C4ofMR.js";import{N as H}from"./button.Bn5-U3NH.js";import{U as Q,b as q,g as F,c as G,O as L,a as R,N as U,e as K}from"./icon.zmQ6wfZz.js";import{u as W}from"./useInject.DhMxnvHP.js";const Z={center:"fade",top:"slide-down",bottom:"slide-up",left:"slide-left",right:"slide-right"};function J(o,{args:t=[],done:a,canceled:n}){if(o){const l=o(null,...t);e(l)?l.then((e=>{e?a(e):n&&n()})).catch((()=>{})):l?a():n&&n()}else a()}const ee=window;const oe=void 0!==ee?ee.requestAnimationFrame||ee.webkitRequestAnimationFrame||function(e){ee.setTimeout(e,1e3/60)}:function(e){setTimeout(e,1e3/60)};let te=0;const ae="nut-overflow-hidden";function ne(e,o){const{getSelectorNodeInfo:t}=function(e){let o=null;return e||(e=f()),e||console.warn("useSelectorQuery","useSelectorQuery必须在setup函数中使用"),o=p().in(e),{query:o,getSelectorNodeInfo:e=>new Promise(((t,a)=>{o?o.select(e).boundingClientRect((o=>{o?t(o):a(new Error(`未找到对应节点: ${e}`))})).exec():a(new Error("未找到对应的SelectorQuery实例"))})),getSelectorNodeInfos:e=>new Promise(((t,a)=>{o?o.selectAll(e).boundingClientRect((o=>{const n=o;n&&n.length>0?t(n):a(new Error(`未找到对应节点: ${e}`))})).exec():a(new Error("未找到对应的SelectorQuery实例"))}))}}(o);return t(`#${e}`)}const le=10;function se(){const e=h(0),o=h(0),t=h(0),a=h(0),n=h(0),l=h(0),s=h(0),i=h(0),r=h(""),c=()=>{n.value=0,l.value=0,s.value=0,i.value=0,r.value=""};return{move:c=>{const u=c.touches[0];var v,d;n.value=u.clientX-e.value,l.value=u.clientY-o.value,t.value=u.clientX,a.value=u.clientY,s.value=Math.abs(n.value),i.value=Math.abs(l.value),r.value||(r.value=(v=s.value,d=i.value,v>d&&v>le?"horizontal":d>v&&d>le?"vertical":""))},start:t=>{c(),e.value=t.touches[0].clientX,o.value=t.touches[0].clientY},reset:c,startX:e,startY:o,moveX:t,moveY:a,deltaX:n,deltaY:l,offsetX:s,offsetY:i,direction:r,isVertical:()=>"vertical"===r.value,isHorizontal:()=>"horizontal"===r.value}}function ie(e,o,t){const a=function(e,o){const t=[],a=e=>{Array.isArray(e)&&e.forEach((e=>{var n,l;(l=e)&&!0===l.__v_isVNode&&(e.type&&e.type.name===o?t.push(e):((null==(n=e.component)?void 0:n.subTree)&&a(e.component.subTree.children),e.children&&a(e.children)))}))};return a(e),t}(e&&e.subTree&&e.subTree.children,t);o.sort(((e,o)=>a.indexOf(e.vnode)-a.indexOf(o.vnode)))}let re=2e3;const ce={...o,visible:Boolean,zIndex:Number,duration:t(300),overlayClass:a(""),overlayStyle:Object,lockScroll:Boolean,closeOnClickOverlay:n,destroyOnClose:Boolean},ue={[Q]:e=>l(e),[q]:e=>e instanceof Object},ve=`${r}-overlay`,de=g({name:ve,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),pe=c(g({...de,props:ce,emits:ue,setup(e,{emit:o}){const t=e,a=o,n=C((()=>s(t,ve,{[t.overlayClass]:!0}))),l=C((()=>"number"==typeof t.duration?t.duration:Number(t.duration))),r=C((()=>i(t,{transitionDuration:`${l.value}ms`,zIndex:t.zIndex,...t.overlayStyle})));function c(e){a(q,e),t.closeOnClickOverlay&&a(Q,!1)}const[u,v]=(d=()=>t.lockScroll,[()=>{if(d())try{!te&&document.body.classList.add(ae),te++}catch(e){console.error(e)}},()=>{if(d()&&te)try{te--,!te&&document.body.classList.remove(ae)}catch(e){console.error(e)}}]);var d;return w((()=>{t.visible?u():v()})),(e,o)=>(k(),x(H,{"custom-class":n.value,"custom-style":r.value,show:t.visible,name:"fade",duration:l.value,"destroy-on-close":t.destroyOnClose,onClick:c},{default:$((()=>[I(e.$slots,"default",{},void 0,!0)])),_:3},8,["custom-class","custom-style","show","duration","destroy-on-close"]))}}),[["__scopeId","data-v-ffd46484"]]),fe={...ce,...o,position:a("center"),transition:{type:String,default:""},popClass:a(""),closeable:Boolean,closeIconPosition:a("top-right"),closeIcon:a("close"),destroyOnClose:n,overlay:n,round:Boolean,safeAreaInsetBottom:Boolean,safeAreaInsetTop:n},he={[Q]:e=>l(e),"click-pop":e=>e instanceof Object,"click-close-icon":()=>!0,[F]:()=>!0,[G]:()=>!0,[L]:()=>!0,opend:()=>!0,[R]:()=>!0,"click-overlay":()=>!0},me=`${r}-popup`;function ye(e,o){const t=O({innerVisible:!1,innerIndex:e.zIndex,showSlot:!0}),a=C((()=>s(e,me,{round:e.round,[`nut-popup--${e.position}`]:!0,[`nut-popup--${e.position}--safebottom`]:"bottom"===e.position&&e.safeAreaInsetBottom,[`nut-popup--${e.position}--safetop`]:"top"===e.position&&e.safeAreaInsetTop,[e.popClass]:!0}))),n=C((()=>i(e,{zIndex:t.innerIndex,transitionDuration:`${e.duration}ms`}))),l=C((()=>e.transition?e.transition:`${Z[e.position]}`)),r=()=>{t.innerVisible||(t.innerIndex=void 0!==e.zIndex?e.zIndex:++re,t.innerVisible=!0,o(Q,!0),t.showSlot=!0,o(F))},c=()=>{t.innerVisible&&(t.innerVisible=!1,o(Q,!1),o(G))};return _((()=>e.visible),(e=>{e&&!t.innerVisible&&r(),!e&&t.innerVisible&&(t.innerVisible=!1,o(G))})),{...T(t),popStyle:n,transitionName:l,classes:a,onClick:e=>{o("click-pop",e)},onClickCloseIcon:e=>{e.stopPropagation(),o("click-close-icon"),c()},onClickOverlay:()=>{o("click-overlay"),e.closeOnClickOverlay&&c()},onOpened:()=>{o(L),o("opend")},onClosed:()=>{o(R),t.showSlot=!e.destroyOnClose}}}const be=g({name:`${r}-popup`,options:{virtualHost:!0,addGlobalClass:!0}}),ge=c(g({...be,props:fe,emits:he,setup(e,{emit:o}){const t=e,a=o,{classes:n,popStyle:l,innerIndex:s,showSlot:i,transitionName:r,onClick:c,onClickCloseIcon:u,onClickOverlay:v,onOpened:d,onClosed:p}=ye(t,a);return(e,o)=>{const a=X;return k(),S(E,null,[t.overlay?(k(),x(pe,z({key:0},e.$attrs,{visible:t.visible,"close-on-click-overlay":t.closeOnClickOverlay,"z-index":P(s),"lock-scroll":t.lockScroll,duration:t.duration,"overlay-class":t.overlayClass,"overlay-style":t.overlayStyle,"destroy-on-close":t.destroyOnClose,onClick:P(v)}),null,16,["visible","close-on-click-overlay","z-index","lock-scroll","duration","overlay-class","overlay-style","destroy-on-close","onClick"])):A("",!0),N(H,{name:P(r),"custom-class":P(n),show:t.visible,"destroy-on-close":t.destroyOnClose,"custom-style":P(l),duration:Number(t.duration),onAfterEnter:P(d),onAfterLeave:P(p),onClick:P(c)},{default:$((()=>[P(i)?I(e.$slots,"default",{key:0},void 0,!0):A("",!0),t.closeable?(k(),x(a,{key:1,class:V(["nut-popup__close-icon",`nut-popup__close-icon--${t.closeIconPosition}`]),onClick:P(u)},{default:$((()=>[I(e.$slots,"closeIcon",{},(()=>[N(U,{name:"close",height:"12px"})]),!0)])),_:3},8,["class","onClick"])):A("",!0)])),_:3},8,["name","custom-class","show","destroy-on-close","custom-style","duration","onAfterEnter","onAfterLeave","onClick"])],64)}}}),[["__scopeId","data-v-6be07a7d"]]),Ce={...o,width:t(""),height:t(""),direction:a("horizontal"),paginationVisible:Boolean,paginationColor:a("#fff"),loop:n,duration:t(500),autoPlay:t(0),isAutoPlay:n,initPage:t(0),touchable:n,isPreventDefault:n,isStopPropagation:n,list:{type:Array,default:()=>[]},paginationUnselectedColor:a("#ddd")},we={[K]:e=>u(e)},ke=Symbol("swiper"),xe=`${r}-swiper`,$e=g({name:xe,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),Ie=c(g({...$e,props:Ce,emits:we,setup(e,{expose:o,emit:t}){const a=e,n=t,l=f(),s=`container-${v()}`,i=O({active:0,num:0,rect:null,width:0,height:0,moving:!1,offset:0,touchTime:0,autoplayTimer:null,childrenVNode:[],style:{}}),r=se(),c=C((()=>({[xe]:!0}))),u=C((()=>"vertical"===a.direction)),p=C((()=>({[`${xe}-inner`]:!0,[`${xe}-vertical`]:u.value}))),h=C((()=>({[`${xe}-pagination`]:!0,[`${xe}-pagination-vertical`]:u.value}))),g=C((()=>u.value?r.deltaY.value:r.deltaX.value)),w=C((()=>r.direction.value===a.direction)),T=C((()=>G.length)),z=C((()=>i[u.value?"height":"width"])),H=C((()=>T.value*z.value)),Q=C((()=>{if(i.rect){return(u.value?i.rect.height:i.rect.width)-z.value*T.value}return 0})),q=C((()=>(i.active+T.value)%T.value));function F(){let e=0;e=i.offset,i.style={transitionDuration:`${i.moving?0:a.duration}ms`,transform:`translate${u.value?"Y":"X"}(${e}px)`,[u.value?"height":"width"]:z.value*T.value+"px",[u.value?"width":"height"]:`${u.value?i.width:i.height}px`}}const{internalChildren:G}=function(e,o){const t=m([]),a=m([]),n=f(),l=e=>{e.proxy&&(t.push(b(e)),a.push(b(e.proxy)),ie(n,t,o))},s=e=>{e.proxy&&(t.splice(t.indexOf(b(e)),1),a.splice(a.indexOf(b(e.proxy)),1))};return o=>(y(e,{add:l,remove:s,internalChildren:t,...o}),{internalChildren:t,children:a})}(ke,"nut-form-swiper")({props:a,size:z});function L(e,o=0){let t=e*z.value;a.loop||(t=Math.min(t,-Q.value));let n=o-t;return a.loop||(n=d(n,Q.value,0)),n}function R({pace:e=0,offset:o=0,isEmit:t=!1}){if(T.value<=1)return;const{active:l}=i,s=function(e){const{active:o}=i;return e?a.loop?d(o+e,-1,T.value):d(o+e,0,T.value-1):o}(e),r=L(s,o);if(a.loop){if(G[0]&&r!==Q.value){const e=r<Q.value;G[0].exposed.setOffset(e?H.value:0)}if(G[T.value-1]&&0!==r){const e=r>0;G[T.value-1].exposed.setOffset(e?-H.value:0)}}i.active=s,i.offset=r,t&&l!==i.active&&n("change",q.value),F()}function U(){i.moving=!0,i.active<=-1&&R({pace:T.value}),i.active>=T.value&&R({pace:-T.value})}function K(){i.autoplayTimer&&clearTimeout(i.autoplayTimer)}function W(e){U(),r.reset(),oe((()=>{oe((()=>{i.moving=!1,R({pace:e,isEmit:!0})}))}))}function Z(){W(1)}function J(){+a.autoPlay<=0||T.value<=1||(K(),i.autoplayTimer=setTimeout((()=>{Z(),J()}),Number(a.autoPlay)))}async function ee(e=+a.initPage){K(),i.rect=await ne(s,l),i.rect&&(e=Math.min(T.value-1,e),i.width=a.width?+a.width:i.rect.width,i.height=a.height?+a.height:i.rect.height,i.active=e,i.offset=L(i.active),i.moving=!0,F(),J())}function te(e){a.isStopPropagation&&e.stopPropagation(),a.touchable&&(r.start(e),i.touchTime=Date.now(),K(),U())}function ae(e){a.touchable&&i.moving&&(r.move(e),w.value&&R({offset:g.value}))}function le(e){if(!a.touchable||!i.moving)return;const o=g.value/(Date.now()-i.touchTime);if((Math.abs(o)>.3||Math.abs(g.value)>+(z.value/2).toFixed(2))&&w.value){let e=0;const o=u.value?r.offsetY.value:r.offsetX.value;e=a.loop?o>0?g.value>0?-1:1:0:-Math[g.value>0?"ceil":"floor"](g.value/z.value),R({pace:e,isEmit:!0})}else g.value&&R({pace:0});i.moving=!1,F(),J()}return o({prev:function(){W(-1)},next:Z,to:function(e){U(),r.reset(),oe((()=>{let o;i.moving=!1,o=a.loop&&T.value===e?0===i.active?0:e:e%T.value,R({pace:o-i.active,isEmit:!0})}))}}),Y((()=>{K()})),j((()=>{K()})),_((()=>a.initPage),(e=>{M((()=>{ee(+e)}))})),_((()=>a.height),(e=>{M((()=>{ee(+e)}))})),_((()=>G.length),(()=>{M((()=>{ee()}))})),_((()=>a.autoPlay),(e=>{+e>0?J():K()})),(e,o)=>{const t=X;return k(),x(t,{id:s,class:V([c.value,e.customClass]),"catch-move":e.isPreventDefault,style:B([e.customStyle]),onTouchstart:te,onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:$((()=>[N(t,{class:V(p.value),style:B(i.style)},{default:$((()=>[I(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),I(e.$slots,"page",{},void 0,!0),e.paginationVisible&&!e.$slots.page?(k(),x(t,{key:0,class:V(h.value)},{default:$((()=>[(k(!0),S(E,null,D(P(G).length,((o,t)=>(k(),S("i",{key:t,class:V(["pagination",{active:q.value===t}]),style:B({backgroundColor:q.value===t?e.paginationColor:e.paginationUnselectedColor})},null,6)))),128))])),_:1},8,["class"])):A("",!0)])),_:3},8,["class","catch-move","style","onTouchstart","onTouchmove","onTouchend","onTouchcancel"])}}}),[["__scopeId","data-v-5ba0741f"]]),Oe={...o},_e=`${r}-swiper-item`,Te=g({name:_e,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),Se=c(g({...Te,props:Oe,setup(e,{expose:o}){const t=e,{parent:a}=W(ke),n=O({offset:0}),l=C((()=>s(t,_e))),r=C((()=>{const e={},o=null==a?void 0:a.props.direction;return(null==a?void 0:a.size.value)&&(e["horizontal"===o?"width":"height"]=`${null==a?void 0:a.size.value}px`),n.offset&&(e.transform=`translate${"horizontal"===o?"X":"Y"}(${n.offset}px)`),i(t,e)}));return o({setOffset:function(e){n.offset=e}}),(e,o)=>{const t=X;return k(),x(t,{class:V(l.value),style:B(r.value)},{default:$((()=>[I(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-6f067c59"]]);export{ge as N,Ie as a,Se as b,J as f,fe as p};
